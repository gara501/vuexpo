<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link rel="icon" href="<%= BASE_URL %>favicon.ico">
    <title>Vue state management</title>
    <script src="https://unpkg.com/vue"></script>
    <script src="https://unpkg.com/vuex"></script>
    <link href="https://fonts.googleapis.com/css?family=Titillium+Web:300,400,600,700&display=swap" rel="stylesheet">
    <style>
    body {
      font-family: 'Titillium Web', sans-serif;
    }
    </style>
  </head>
    <body>
    <noscript>
      <strong>We're sorry but notes doesn't work properly without JavaScript enabled. Please enable it to continue.</strong>
    </noscript>
    <div id="app" :style="{ fontSize: postFontSize + 'em' }">
      <h1>{{ welcome }}</h1>
      <button-counter v-on:enlarge-text="postFontSize += 0.1"></button-counter>
      <button-color></button-color>
    </div>
    <script>
    Vue.component('button-counter', {
      data: function () {
        return {
          count: 0
        }
      },
      template: '<div><h2>Total: {{ count }}</h2><button v-on:click="count++">Increase Counter</button><button v-on:click="$emit(\'enlarge-text\')">Increase Text Size</button></div>'
    })

    Vue.component('button-color', {
      data: function () {
        return {
          buttonColor: '#ff4400'
        }
      },
      methods: {      
        randomNumber(){
          return Math.floor(Math.random() * (255 - 0)) + 0;
        },
        changeColor(){
          let rgbNumbers =[this.randomNumber(), this.randomNumber(), this.randomNumber()];
          let rgb = rgbNumbers.join(',');
          let formatted =  'rgb(' + rgb.split(',') + ')';
          this.buttonColor = formatted;
          return formatted;
        }
      },
      template: '<button :style="{ background: buttonColor }" v-on:click="changeColor">Background: {{ buttonColor }}</button>'
    })

    new Vue({
      el: "#app",
      data() {
        return {
          welcome: "Basic components management",
          postFontSize: 1
        }
      },
      computed: {
        message() {
          return store.state.message;
        }
      }
    });

    
    </script>
  </body>
</html>
